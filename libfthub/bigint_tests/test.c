#include "libft.h"
#include <stdio.h>
#include <assert.h>

int main(void)
{


//     char			*ft_bigint_add(char *dst, const char *to_add, size_t limit);
// char			*ft_bigint_divide_by_two(char *output, size_t limit);
// char			*ft_bigint_multiply_by_two(char *output);
// char			*ft_bigint_shift_right(char *str, size_t nb, size_t limit);
// char			*ft_bigint_trim(char *str);
// char			*ft_bigint_round(char *dst, int precision, size_t limit);


	printf("-------------Test bigint-------------\n");
    size_t len_limit;

	len_limit = 99999;
    char *output;
	char *to_add;

	output = NULL;
	to_add = NULL; 
	output = ft_memalloc(len_limit*sizeof(char));
	to_add = ft_memalloc(len_limit*sizeof(char));
    output = ft_strcpy(output, "10101010101010.10101010101");
	to_add = ft_strcpy(to_add, "999999");
	printf("-------------Test ft_bigint_multiply_by_two-------------\n");
	printf("first bigint :\t%s\n", output);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "20202020202020.20202020202") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "40404040404040.40404040404") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "80808080808080.80808080808") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "161616161616161.61616161616") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "323232323232323.23232323232") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "646464646464646.46464646464") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "1292929292929292.92929292928") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "2585858585858585.85858585856") == 0);
	printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "5171717171717171.71717171712") == 0);	
    printf("\033[32mCheck if multiply by two is correct \033[00m\n");
    output = ft_bigint_multiply_by_two(output);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "10343434343434343.43434343424") == 0);
	printf("-------------Test ft_bigint_divide_by_two-------------\n");
	printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "5171717171717171.71717171712") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "2585858585858585.85858585856") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "1292929292929292.92929292928") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "646464646464646.46464646464") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "323232323232323.23232323232") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "161616161616161.61616161616") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "80808080808080.80808080808") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "40404040404040.40404040404") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "20202020202020.20202020202") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "10101010101010.10101010101") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "5050505050505.050505050505") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "2525252525252.5252525252525") == 0);	
    printf("\033[32mCheck if divide by two is correct \033[00m\n");
    output = ft_bigint_divide_by_two(output, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "1262626262626.26262626262625") == 0);	
	printf("-------------Test ft_bigint_add-------------\n");
    printf("\033[32mCheck if bigint add 1.1 is correct \033[00m\n");
	to_add = ft_strcpy(to_add, "1.1");
	output = ft_bigint_add(output, to_add, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "1262626262627.36262626262625") == 0);
	printf("\033[32mCheck if bigint add 0.36262626262625 is correct \033[00m\n");
	to_add = ft_strcpy(to_add, "0.36262626262625");
	output = ft_bigint_add(output, to_add, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "1262626262627.7252525252525") == 0);	
    printf("\033[32mCheck if bigint add 100000.99999999 is correct \033[00m\n");
	to_add = ft_strcpy(to_add, "100000.99999999");
	output = ft_bigint_add(output, to_add, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "1262626362628.7252525152525") == 0);	
    printf("\033[32mCheck if bigint add 1000000000000 is correct \033[00m\n");
	to_add = ft_strcpy(to_add, "1000000000000");
	output = ft_bigint_add(output, to_add, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "2262626362628.7252525152525") == 0);    
    printf("\033[32mCheck if bigint add 0.0000000000001 is correct \033[00m\n");
	to_add = ft_strcpy(to_add, "0.0000000000001");
	output = ft_bigint_add(output, to_add, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "2262626362628.7252525152526") == 0);    
    printf("\033[32mCheck if bigint add 0.00000000000001 is correct \033[00m\n");
	to_add = ft_strcpy(to_add, "0.00000000000001");
	output = ft_bigint_add(output, to_add, len_limit);
	printf("result :\t%s\n", output);
	assert(ft_strcmp(output, "2262626362628.72525251525261") == 0);
	printf("-------------Test ft_bigint_round-------------\n");
    printf("\033[32mRound to 9 \033[00m\n");
    output = ft_bigint_round(output, 9, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.725252515") == 0);
    printf("\033[32mRound to 6 \033[00m\n");
    output = ft_bigint_round(output, 6, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.725253") == 0);
    printf("\033[32mRound to 3 \033[00m\n");
    output = ft_bigint_round(output, 3, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.725") == 0);
    printf("\033[32mRound to 2 \033[00m\n");
    output = ft_bigint_round(output, 2, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.72") == 0);
    printf("\033[32mRound to 1 \033[00m\n");
    output = ft_bigint_round(output, 1, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.7") == 0);
    printf("\033[32mRound to 1 \033[00m\n");
    output = ft_bigint_round(output, 1, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.7") == 0);
    printf("\033[32mRound to 10 \033[00m\n");
    output = ft_bigint_round(output, 10, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362628.7000000000") == 0);
    printf("\033[32mRound to 0 \033[00m\n");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result :\t%s\n", output);
    assert(ft_strcmp(output, "2262626362629") == 0);

	printf("-------------Test bankers'rounding-------------\n");
	output = ft_strcpy(output, "10.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 10.5 :\t%s\n", output);
    assert(ft_strcmp(output, "10") == 0);
	output = ft_strcpy(output, "11.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 11.5 :\t%s\n", output);
    assert(ft_strcmp(output, "12") == 0);

	output = ft_strcpy(output, "2.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 2.5 :\t%s\n", output);
    assert(ft_strcmp(output, "2") == 0);

	output = ft_strcpy(output, "3.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 3.5 :\t%s\n", output);
    assert(ft_strcmp(output, "4") == 0);

	output = ft_strcpy(output, "4.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 4.5 :\t%s\n", output);
    assert(ft_strcmp(output, "4") == 0);

	output = ft_strcpy(output, "0.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 0.5 :\t%s\n", output);
    assert(ft_strcmp(output, "0") == 0);
	output = ft_strcpy(output, "1.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 1.5 :\t%s\n", output);
    assert(ft_strcmp(output, "2") == 0);

	output = ft_strcpy(output, "2.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 2.5 :\t%s\n", output);
    assert(ft_strcmp(output, "2") == 0);

	output = ft_strcpy(output, "3.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 3.5 :\t%s\n", output);
    assert(ft_strcmp(output, "4") == 0);

	output = ft_strcpy(output, "4.5");
    output = ft_bigint_round(output, 0, len_limit);
	printf("result 4.5 :\t%s\n", output);
    assert(ft_strcmp(output, "4") == 0);

	free(output);
	output = NULL;
	free(to_add);	
	to_add = NULL;
    return (0);
}
